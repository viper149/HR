@model ComImpWorkOrderViewModel

@{
    ViewData["Title"] = "Commercial Import Work Order";
}

<h2><i class="fa fa-edit text-success" aria-hidden="true"></i> Update @ViewData["Title"]</h2>

<div class="container-fluid">
    <form id="form" enctype="multipart/form-data" role="form" asp-action="EditComImpWorkOrder">
        <div asp-validation-summary="ModelOnly" class="text-danger"></div>
        <div class="panel-body row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <h2 class="panel-title text-success"><i class="fa fa-cart-plus" aria-hidden="true"></i> @ViewData["Title"] Information </h2><hr />
                </div>
            </div>

            @Html.HiddenFor(e => e.ComImpWorkOrderMaster.EncryptedId)
            @Html.HiddenFor(e => e.ComImpWorkOrderMaster.INDID)
            @Html.HiddenFor(e => e.ComImpWorkOrderMaster.SUPPID)

            <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                <div class="form-group">
                    <label asp-for="ComImpWorkOrderMaster.WODATE" class="control-label"></label>
                    <input asp-for="ComImpWorkOrderMaster.WODATE" class="form-control" readonly="readonly" />
                    <span asp-validation-for="ComImpWorkOrderMaster.WODATE" class="text-danger"></span>
                </div>
            </div>
            <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                <div class="form-group">
                    <label asp-for="ComImpWorkOrderMaster.CONTNO" class="control-label"></label>
                    <input asp-for="ComImpWorkOrderMaster.CONTNO" class="form-control" readonly="readonly" />
                    <span asp-validation-for="ComImpWorkOrderMaster.CONTNO" class="text-danger"></span>
                </div>
            </div>
            <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                <div class="form-group">
                    <label asp-for="ComImpWorkOrderMaster.INDID" class="control-label"></label>
                    <input asp-for="ComImpWorkOrderMaster.IND.INDSL.INDSLNO" class="form-control" id="indNoR" readonly="readonly" />
                    <span asp-validation-for="ComImpWorkOrderMaster.INDID" class="text-danger"></span>
                </div>
            </div>
            <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                <div class="form-group">
                    <label asp-for="ComImpWorkOrderMaster.SUPPID" class="control-label"></label>
                    <input asp-for="ComImpWorkOrderMaster.SUPP.SUPPNAME" class="form-control" id="suppR" readonly="readonly" />
                    <span asp-validation-for="ComImpWorkOrderMaster.SUPPID" class="text-danger"></span>
                </div>
            </div>

            @if (User.IsInRole("Marketing(Head)"))
            {
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label asp-for="ComImpWorkOrderMaster.REMARKS" class="control-label"></label>
                        <input asp-for="ComImpWorkOrderMaster.REMARKS" class="form-control" />
                        <span asp-validation-for="ComImpWorkOrderMaster.REMARKS" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label asp-for="ComImpWorkOrderMaster.VALDATE" class="control-label"></label>
                        <input asp-for="ComImpWorkOrderMaster.VALDATE" class="form-control" />
                        <span asp-validation-for="ComImpWorkOrderMaster.VALDATE" class="text-danger"></span>
                    </div>
                </div>
                @*@Html.HiddenFor(e => e.ComImpWorkOrderMaster.ZONE_APPROVE)*@
                @if (!Model.ComImpWorkOrderMaster.BTL_APPROVE)
                {
                    <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label asp-for="ComImpWorkOrderMaster.BTL_APPROVE" class="control-label"></label>
                            <div class="form-control custom-form-control">
                                <label class="switch">
                                    <input asp-for="ComImpWorkOrderMaster.BTL_APPROVE" />
                                    <span class="slider round"></span>
                                    <span class="absolute-no">NO</span>
                                </label>
                            </div>
                            <span asp-validation-for="ComImpWorkOrderMaster.BTL_APPROVE" class="text-danger"></span>
                        </div>
                    </div>
                }

                @if (Model.ComImpWorkOrderDetailsList.Any())
                {
                    <table class="table" id="partialView">
                        <thead class="thead-light">
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">@Html.DisplayNameFor(model => model.ComImpWorkOrderDetailsList.FirstOrDefault().COUNTID)</th>
                                <th scope="col">@Html.DisplayNameFor(model => model.ComImpWorkOrderDetailsList.FirstOrDefault().LOTID)</th>
                                <th scope="col">@Html.DisplayNameFor(model => model.ComImpWorkOrderDetailsList.FirstOrDefault().QTY)</th>
                                <th scope="col">@Html.DisplayNameFor(model => model.ComImpWorkOrderDetailsList.FirstOrDefault().INDD.BASCOUNTINFO.UNIT)</th>
                                <th scope="col">@Html.DisplayNameFor(model => model.ComImpWorkOrderDetailsList.FirstOrDefault().UPRICE)</th>
                                <th scope="col">@Html.DisplayNameFor(model => model.ComImpWorkOrderDetailsList.FirstOrDefault().TOTAL)</th>
                                <th scope="col">@Html.DisplayNameFor(model => model.ComImpWorkOrderDetailsList.FirstOrDefault().REMARKS)</th>
                            </tr>
                        </thead>
                        <tbody>
                            @for (var i = 0; i < Model.ComImpWorkOrderDetailsList.Count; i++)
                            {
                                <tr>
                                    <td>@(i + 1)</td>
                                    <td>
                                        @Html.HiddenFor(model => model.ComImpWorkOrderDetailsList[i].TRANSID)
                                        @Html.HiddenFor(model => model.ComImpWorkOrderDetailsList[i].WOID)
                                        @Html.HiddenFor(model => model.ComImpWorkOrderDetailsList[i].NOTES)
                                        @Html.HiddenFor(model => model.ComImpWorkOrderDetailsList[i].COUNTID)
                                        @Model.ComImpWorkOrderDetailsList[i].INDD?.BASCOUNTINFO?.RND_COUNTNAME
                                    </td>
                                    <td>
                                        @*@Html.HiddenFor(model => model.ComImpWorkOrderDetailsList[i].LOTID)*@
                                        @Model.ComImpWorkOrderDetailsList[i].LOT?.LOTNO
                                    </td>
                                    <td>
                                        @Html.HiddenFor(model => model.ComImpWorkOrderDetailsList[i].QTY)
                                        @Model.ComImpWorkOrderDetailsList[i].QTY
                                    </td>
                                    <td>
                                        @Model.ComImpWorkOrderDetailsList[i].INDD?.BASCOUNTINFO?.UNIT
                                    </td>
                                    <td>
                                        <input asp-for="ComImpWorkOrderDetailsList[i].UPRICE" class="form-control" onkeyup="CalculateTotalPrice('@i')" />
                                    </td>
                                    <td>
                                        <input asp-for="ComImpWorkOrderDetailsList[i].TOTAL" class="form-control" readonly="readonly" />
                                    </td>
                                    <td>
                                        @Html.HiddenFor(model => model.ComImpWorkOrderDetailsList[i].REMARKS)
                                        @Model.ComImpWorkOrderDetailsList[i].REMARKS
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                }
            }
            @Html.HiddenFor(e => e.ComImpWorkOrderMaster.BTL_APPROVE)

            @if (User.IsInRole("Costing(Head)"))
            {
                @if (Model.ComImpWorkOrderMaster.IND.INDSL.YARN_FOR == "Sample")
                {
                    <div class="form-group">
                        <label class="control-label">Query No</label>
                        <input asp-for="ComImpWorkOrderMaster.IND.INDSL.ORDERNO_SNavigation.RND_ANALYSIS_SHEET.MKT_QUERY_NO" class="form-control" readonly="readonly" />
                    </div>
                    <div class="form-group">
                        <label class="control-label">Order No</label>
                        <input asp-for="ComImpWorkOrderMaster.IND.INDSL.YARN_FOR" class="form-control" readonly="readonly" />
                    </div>
                    <div class="form-group">
                        <label class="control-label">Order Quantity</label>
                        <input asp-for="ComImpWorkOrderMaster.IND.INDSL.SAMPLE_L" class="form-control" readonly="readonly" />
                    </div>
                }
                else
                {
                    <div class="form-group">
                        <label class="control-label">Style Name</label>
                        <input asp-for="ComImpWorkOrderMaster.IND.INDSL.ORDER_NONavigation.SO.STYLE.FABCODENavigation.STYLE_NAME" class="form-control" readonly="readonly" />
                    </div>
                    <div class="form-group">
                        <label class="control-label">Order No</label>
                        <input asp-for="ComImpWorkOrderMaster.IND.INDSL.ORDER_NONavigation.SO.SO_NO" class="form-control" readonly="readonly" />
                    </div>
                    <div class="form-group">
                        <label class="control-label">Order Quantity</label>
                        <input asp-for="ComImpWorkOrderMaster.IND.INDSL.ORDER_NONavigation.SO.QTY" class="form-control" readonly="readonly" />
                    </div>
                }

                @if (Model.ComImpWorkOrderMaster.BTL_APPROVE && !Model.ComImpWorkOrderMaster.FIN_APPROVE)
                {
                    <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label asp-for="ComImpWorkOrderMaster.FIN_APPROVE" class="control-label"></label>
                            <div class="form-control custom-form-control">
                                <label class="switch">
                                    <input asp-for="ComImpWorkOrderMaster.FIN_APPROVE" />
                                    <span class="slider round"></span>
                                    <span class="absolute-no">NO</span>
                                </label>
                            </div>
                            <span asp-validation-for="ComImpWorkOrderMaster.FIN_APPROVE" class="text-danger"></span>
                        </div>
                    </div>
                }
                @if (Model.ComImpWorkOrderDetailsList.Any())
                {
                    <table class="table" id="partialView">
                        <thead class="thead-light">
                            <tr>
                                <th scope="col">#SL</th>
                                <th scope="col">@Html.DisplayNameFor(model => model.ComImpWorkOrderDetailsList.FirstOrDefault().COUNTID)</th>
                                <th scope="col">@Html.DisplayNameFor(model => model.ComImpWorkOrderDetailsList.FirstOrDefault().LOTID)</th>
                                <th scope="col">@Html.DisplayNameFor(model => model.ComImpWorkOrderDetailsList.FirstOrDefault().QTY)</th>
                                <th scope="col">@Html.DisplayNameFor(model => model.ComImpWorkOrderDetailsList.FirstOrDefault().INDD.BASCOUNTINFO.UNIT)</th>
                                <th scope="col">@Html.DisplayNameFor(model => model.ComImpWorkOrderDetailsList.FirstOrDefault().UPRICE)</th>
                                <th scope="col">@Html.DisplayNameFor(model => model.ComImpWorkOrderDetailsList.FirstOrDefault().TOTAL)</th>
                                <th scope="col">@Html.DisplayNameFor(model => model.ComImpWorkOrderDetailsList.FirstOrDefault().REMARKS)</th>
                            </tr>
                        </thead>
                        <tbody>
                            @for (var i = 0; i < Model.ComImpWorkOrderDetailsList.Count; i++)
                            {
                                <tr>

                                    <td>@(i + 1)</td>
                                    <td>
                                        @Html.HiddenFor(model => model.ComImpWorkOrderDetailsList[i].TRANSID)
                                        @Html.HiddenFor(model => model.ComImpWorkOrderDetailsList[i].WOID)
                                        @Html.HiddenFor(model => model.ComImpWorkOrderDetailsList[i].NOTES)
                                        @Html.HiddenFor(model => model.ComImpWorkOrderDetailsList[i].COUNTID)
                                        @Model.ComImpWorkOrderDetailsList[i].INDD.BASCOUNTINFO?.RND_COUNTNAME
                                    </td>
                                    <td>
                                        @*@Html.HiddenFor(model => model.ComImpWorkOrderDetailsList[i].LOTID)*@
                                        @Model.ComImpWorkOrderDetailsList[i].LOT?.LOTNO
                                    </td>
                                    <td>
                                        @Html.HiddenFor(model => model.ComImpWorkOrderDetailsList[i].QTY)
                                        @Model.ComImpWorkOrderDetailsList[i].QTY
                                    </td>
                                    <td>
                                        @Model.ComImpWorkOrderDetailsList[i].INDD.BASCOUNTINFO?.UNIT
                                    </td>
                                    <td>
                                        @Html.HiddenFor(model => model.ComImpWorkOrderDetailsList[i].UPRICE)
                                        @Model.ComImpWorkOrderDetailsList[i].UPRICE
                                    </td>
                                    <td>
                                        @Html.HiddenFor(model => model.ComImpWorkOrderDetailsList[i].TOTAL)
                                        @Model.ComImpWorkOrderDetailsList[i].TOTAL
                                    </td>
                                    <td>
                                        @Html.HiddenFor(model => model.ComImpWorkOrderDetailsList[i].REMARKS)
                                        @Model.ComImpWorkOrderDetailsList[i].REMARKS
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                }
            }

            @Html.HiddenFor(e => e.ComImpWorkOrderMaster.FIN_APPROVE)


            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">

                <button id="btn_submit" class="btn btn-warning nextBtn pull-right" type="submit">Update</button>
                <button id="addToList" class="btn btn-success pull-right" type="button">Add to List</button>
                <a asp-action="GetComImpWorkOrder" class="btn btn-dark pull-right">Back to List</a>
            </div>
        </div>
    </form>
</div>

@section Scripts {
    <script asp-append-version="true" src="~/js/ComImpWorkOrder/CreateComImpWorkOrder.js"></script>
}

@model PrWarpingProcessRopeViewModel

@{
    ViewData["Title"] = "Edit Warping Process(Rope)";
}

<h2><i class="fa fa-edit fa-lg text-warning" aria-hidden="true"></i> Warping Process(Rope)</h2>

<div class="container-fluid">
    <div class="stepwizard">
        <div class="stepwizard-row setup-panel d-flex justify-content-around">
            <div class="stepwizard-step">
                <a href="#step-1" type="button" class="btn btn-success btn-circle">1</a>
                <p><small>Step 1</small></p>
            </div>
            <div class="stepwizard-step">
                <a href="#step-2" type="button" class="btn btn-default btn-circle" disabled="disabled">2</a>
                <p><small>Finish</small></p>
            </div>
        </div>
    </div>

    <form id="form" role="form" asp-action="EditWarpingProcessRope">
        <div class="panel panel-default setup-content" id="step-1">
            <div class="panel-body row">
                @Html.HiddenFor(c => c.FPrWarpingProcessRopeMaster.EncryptedId)
                @Html.HiddenFor(c => c.FPrWarpingProcessRopeMaster.WARPID)
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label asp-for="FPrWarpingProcessRopeMaster.SUBGROUPID" class="control-label"></label>
                        @Html.DropDownListFor(dt => dt.FPrWarpingProcessRopeMaster.SUBGROUPID, new SelectList(Model.PlProductionPlanDetailsList, "SUBGROUPID", "OPT1"), "Select Super Set", htmlAttributes: new { @class = "form-control js-example-basic-single" })
                        <span asp-validation-for="FPrWarpingProcessRopeMaster.SUBGROUPID" class="text-danger"></span>
                    </div>
                </div>
                <span class="d-none" id="programNo">
                </span>
                <span class="d-none" id="programCount">
                </span>

                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label asp-for="FPrWarpingProcessRopeMaster.WARP_LENGTH" class="control-label"></label>
                        <input asp-for="FPrWarpingProcessRopeMaster.WARP_LENGTH" class="form-control" />
                        <span asp-validation-for="FPrWarpingProcessRopeMaster.WARP_LENGTH" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label class="control-label">Warp Length(Act.)</label>
                        <span class="custom-form-control-bg form-control bg-e9ecef" id="warpLenAct">
                        </span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label asp-for="FPrWarpingProcessRopeMaster.TIME_START" class="control-label"></label>
                        <input asp-for="FPrWarpingProcessRopeMaster.TIME_START" class="form-control" />
                        <span asp-validation-for="FPrWarpingProcessRopeMaster.TIME_START" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label asp-for="FPrWarpingProcessRopeMaster.TIME_END" class="control-label"></label>
                        <input asp-for="FPrWarpingProcessRopeMaster.TIME_END" class="form-control" />
                        <span asp-validation-for="FPrWarpingProcessRopeMaster.TIME_END" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label asp-for="FPrWarpingProcessRopeMaster.DELIVERY_DATE" class="control-label"></label>
                        <input asp-for="FPrWarpingProcessRopeMaster.DELIVERY_DATE" class="form-control" />
                        <span asp-validation-for="FPrWarpingProcessRopeMaster.DELIVERY_DATE" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label asp-for="FPrWarpingProcessRopeMaster.REMARKS" class="control-label"></label>
                        <input asp-for="FPrWarpingProcessRopeMaster.REMARKS" class="form-control" />
                        <span asp-validation-for="FPrWarpingProcessRopeMaster.REMARKS" class="text-danger"></span>
                    </div>
                </div>

                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label asp-for="FPrWarpingProcessRopeMaster.IS_DECLARE" class="control-label"></label>
                        <div class="form-control custom-form-control">
                            <label class="switch">
                                <input asp-for="FPrWarpingProcessRopeMaster.IS_DECLARE" />
                                <span class="slider round"></span>
                                <span class="absolute-no">NO</span>
                            </label>
                        </div>
                        <span asp-validation-for="FPrWarpingProcessRopeMaster.IS_DECLARE" class="text-danger"></span>
                    </div>
                </div>

                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <h2 class="panel-title text-success">Total Yarn Consumption</h2>
                    <hr />
                </div>

                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label asp-for="FPrWarpingProcessRopeYarnConsumDetails.COUNT_ID" class="control-label"></label>
                        @Html.DropDownListFor(dt => dt.FPrWarpingProcessRopeYarnConsumDetails.COUNT_ID, new SelectList(Model.BasYarnCountInfos, "COUNTID", "COUNTNAME"), "Select Count Name", htmlAttributes: new { @class = "form-control js-example-basic-single" })
                        <span asp-validation-for="FPrWarpingProcessRopeYarnConsumDetails.COUNT_ID" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label asp-for="FPrWarpingProcessRopeYarnConsumDetails.BGT_KG_TOTAL" class="control-label"></label>
                        <input asp-for="FPrWarpingProcessRopeYarnConsumDetails.BGT_KG_TOTAL" class="form-control" readonly="readonly" />
                        <span asp-validation-for="FPrWarpingProcessRopeYarnConsumDetails.BGT_KG_TOTAL" class="text-danger"></span>
                    </div>
                </div>
                @*<div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label asp-for="FPrWarpingProcessRopeYarnConsumDetails.BGT_KG_PER_SET" class="control-label"></label>
                            <input asp-for="FPrWarpingProcessRopeYarnConsumDetails.BGT_KG_PER_SET" class="form-control" readonly="readonly" />
                            <span asp-validation-for="FPrWarpingProcessRopeYarnConsumDetails.BGT_KG_PER_SET" class="text-danger"></span>
                        </div>
                    </div>*@
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label asp-for="FPrWarpingProcessRopeYarnConsumDetails.CONSUM_TOTAL" class="control-label"></label>
                        <input asp-for="FPrWarpingProcessRopeYarnConsumDetails.CONSUM_TOTAL" class="form-control" />
                        <span asp-validation-for="FPrWarpingProcessRopeYarnConsumDetails.CONSUM_TOTAL" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label asp-for="FPrWarpingProcessRopeYarnConsumDetails.WASTE_TOTAL" class="control-label"></label>
                        <input asp-for="FPrWarpingProcessRopeYarnConsumDetails.WASTE_TOTAL" class="form-control" />
                        <span asp-validation-for="FPrWarpingProcessRopeYarnConsumDetails.WASTE_TOTAL" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label asp-for="FPrWarpingProcessRopeYarnConsumDetails.WASTE_PERCENTAGE_TOTAL" class="control-label"></label>
                        <input asp-for="FPrWarpingProcessRopeYarnConsumDetails.WASTE_PERCENTAGE_TOTAL" class="form-control" readonly="readonly" />
                        <span asp-validation-for="FPrWarpingProcessRopeYarnConsumDetails.WASTE_PERCENTAGE_TOTAL" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label asp-for="FPrWarpingProcessRopeYarnConsumDetails.REMARKS" class="control-label"></label>
                        <input asp-for="FPrWarpingProcessRopeYarnConsumDetails.REMARKS" class="form-control" />
                        <span asp-validation-for="FPrWarpingProcessRopeYarnConsumDetails.REMARKS" class="text-danger"></span>
                    </div>
                </div>

                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <button class="btn btn-info nextBtn pull-right" type="button">Next</button>
                    <button id="btnAddCount" class="btn btn-success pull-right mr-2" type="button">Add</button>
                    <a asp-action="GetWarpingProcessRopeList" class="btn btn-dark pull-right">Back to List</a>
                </div>

                <div id="CountDetails" class="col-lg-12 col-md-12 col-sm-12 col-xs-12">@await Html.PartialAsync("~/Views/FPrWarpingProcessRopeMaster/AddCountList.cshtml", Model)</div>

            </div>
        </div>

        <div class="panel panel-primary setup-content" id="step-2">
            <div class="panel-body row">
                @*<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 d-flex justify-content-end">
                        <div class="form-group">
                            <button class="btn btn-outline-success" id="subGroup" type="button">Add Ball</button>
                        </div>
                    </div>*@
                <div class="pl-1 col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div>
                        <h2 class="panel-title text-success">Program/Set No.</h2>
                    </div>
                    <hr />
                </div>

                <div class="d-none">
                    <span class="d-none" id="ballCount"></span>

                    <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label asp-for="FPrWarpingProcessRopeDetails.SETID" class="control-label"></label>
                            @Html.DropDownListFor(dt => dt.FPrWarpingProcessRopeDetails.SETID, new SelectList(Model.PlProductionSetDistributions, "SETID", "PROG_.PROG_NO"), "Select Prog./Set No", htmlAttributes: new { @class = "form-control js-example-basic-single" })
                            <span asp-validation-for="FPrWarpingProcessRopeDetails.SETID" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label asp-for="FPrWarpingProcessRopeDetails.WARP_LENGTH_PER_SET" class="control-label"></label>
                            <input asp-for="FPrWarpingProcessRopeDetails.WARP_LENGTH_PER_SET" class="form-control" readonly="readonly" />
                            <span asp-validation-for="FPrWarpingProcessRopeDetails.WARP_LENGTH_PER_SET" class="text-danger"></span>
                        </div>
                    </div>
                </div>

                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label asp-for="FPrWarpingProcessRopeDetails.BALL_NO" class="control-label"></label>
                        <input asp-for="FPrWarpingProcessRopeDetails.BALL_NO" class="form-control" />
                        <span asp-validation-for="FPrWarpingProcessRopeDetails.BALL_NO" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label class="control-label">Warp Ratio</label>
                        <span class="custom-form-control-bg form-control bg-e9ecef" id="ratioWarp">
                        </span>
                    </div>
                </div>
                @*<div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label class="control-label">Set Length</label>
                            <span class="custom-form-control-bg form-control bg-e9ecef" id="setLength">
                            </span>
                        </div>
                    </div>*@
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label class="control-label">Style Name</label>
                        <span class="custom-form-control-bg form-control bg-e9ecef" id="style">
                        </span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label class="control-label">Order No</label>
                        <span class="custom-form-control-bg form-control bg-e9ecef" id="orderNo">
                        </span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label class="control-label">P.O No.</label>
                        <span class="custom-form-control-bg form-control bg-e9ecef" id="po">
                        </span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label class="control-label">P.O Length</label>
                        <span class="custom-form-control-bg form-control bg-e9ecef" id="poLength">
                        </span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label class="control-label">Act. Lot</label>
                        <span class="custom-form-control-bg form-control bg-e9ecef" id="lot">
                        </span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12 d-none">
                    <div class="form-group">
                        <label class="control-label">Ref. Lot</label>
                        <span class="custom-form-control-bg form-control bg-e9ecef" id="refLot">
                        </span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label class="control-label">Order Type</label>
                        <span class="custom-form-control-bg form-control bg-e9ecef" id="orderType">
                        </span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label class="control-label">Buyer</label>
                        <span class="custom-form-control-bg form-control bg-e9ecef" id="Buyer">
                        </span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label class="control-label">Ref. Color</label>
                        <span class="custom-form-control-bg form-control bg-e9ecef" id="color">
                        </span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label class="control-label">Yarn Type</label>
                        <span class="custom-form-control-bg form-control bg-e9ecef" id="yarnType">
                        </span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label class="control-label">Warp Type</label>
                        <span class="custom-form-control-bg form-control bg-e9ecef" id="warpType">
                        </span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label class="control-label">Loom Type</label>
                        <span class="custom-form-control-bg form-control bg-e9ecef" id="loomType">
                        </span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label class="control-label">Type Process</label>
                        <span class="custom-form-control-bg form-control bg-e9ecef" id="processType">
                        </span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label class="control-label">Program Type</label>
                        <span class="custom-form-control-bg form-control bg-e9ecef" id="programType">
                        </span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label class="control-label">Total Ends</label>
                        <span class="custom-form-control-bg form-control bg-e9ecef" id="totalEnds">
                        </span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12 d-none">
                    <div class="form-group">
                        <label class="control-label">Act. Supplier</label>
                        <span class="custom-form-control-bg form-control bg-e9ecef" id="supplier">
                        </span>
                    </div>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <h2 class="panel-title text-success">Ball Info.</h2>
                    <hr />
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label asp-for="FPrWarpingProcessRopeBallDetails.BALL_ID_FK" class="control-label"></label>
                        @Html.DropDownListFor(dt => dt.FPrWarpingProcessRopeBallDetails.BALL_ID_FK, new SelectList(Model.BasBallInfos, "BALLID", "BALL_NO"), "Select Ball No.", htmlAttributes: new { @class = "form-control js-example-basic-single" })
                        <span asp-validation-for="FPrWarpingProcessRopeBallDetails.BALL_ID_FK" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label asp-for="FPrWarpingProcessRopeBallDetails.BALL_LENGTH" class="control-label"></label>
                        <input asp-for="FPrWarpingProcessRopeBallDetails.BALL_LENGTH" class="form-control" />
                        <span asp-validation-for="FPrWarpingProcessRopeBallDetails.BALL_LENGTH" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label asp-for="FPrWarpingProcessRopeBallDetails.SHIFT_NAME" class="control-label"></label>
                        <select asp-for="FPrWarpingProcessRopeBallDetails.SHIFT_NAME" class="form-control js-example-basic-single">
                            <option value="">Select Process No</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                        </select>
                        <span asp-validation-for="FPrWarpingProcessRopeBallDetails.SHIFT_NAME" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label asp-for="FPrWarpingProcessRopeBallDetails.OPERATOR" class="control-label"></label>
                        @Html.DropDownListFor(dt => dt.FPrWarpingProcessRopeBallDetails.OPERATOR, new SelectList(Model.FHrEmployees, "EMPID", "FIRST_NAME"), "Select Employee", htmlAttributes: new { @class = "form-control js-example-basic-single" })
                        <span asp-validation-for="FPrWarpingProcessRopeBallDetails.OPERATOR" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label asp-for="FPrWarpingProcessRopeBallDetails.COUNT_ID" class="control-label"></label>
                        @Html.DropDownListFor(dt => dt.FPrWarpingProcessRopeBallDetails.COUNT_ID, new SelectList(Model.BasYarnCountInfos, "COUNTID", "COUNTNAME"), "Select Count Name", htmlAttributes: new { @class = "form-control js-example-basic-single" })
                        <span asp-validation-for="FPrWarpingProcessRopeBallDetails.COUNT_ID" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label asp-for="FPrWarpingProcessRopeBallDetails.MACHINE_NO" class="control-label"></label>
                        @Html.DropDownListFor(dt => dt.FPrWarpingProcessRopeBallDetails.MACHINE_NO, new SelectList(Model.FPrWarpingMachines, "ID", "MACHINE_NAME"), "Select Machine No", htmlAttributes: new { @class = "form-control js-example-basic-single" })
                        <span asp-validation-for="FPrWarpingProcessRopeBallDetails.MACHINE_NO" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label asp-for="FPrWarpingProcessRopeBallDetails.BREAKS_ENDS" class="control-label"></label>
                        <input asp-for="FPrWarpingProcessRopeBallDetails.BREAKS_ENDS" class="form-control" />
                        <span asp-validation-for="FPrWarpingProcessRopeBallDetails.BREAKS_ENDS" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label asp-for="FPrWarpingProcessRopeBallDetails.ENDS_ROPE" class="control-label"></label>
                        <input asp-for="FPrWarpingProcessRopeBallDetails.ENDS_ROPE" class="form-control" />
                        <span asp-validation-for="FPrWarpingProcessRopeBallDetails.ENDS_ROPE" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label asp-for="FPrWarpingProcessRopeBallDetails.LINK_BALL_NO" class="control-label"></label>
                        @Html.DropDownListFor(dt => dt.FPrWarpingProcessRopeBallDetails.LINK_BALL_NO, new SelectList(Model.BasBallInfos, "BALLID", "BALL_NO"), "Select Link Ball No.", htmlAttributes: new { @class = "form-control js-example-basic-single" })
                        <span asp-validation-for="FPrWarpingProcessRopeBallDetails.LINK_BALL_NO" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label asp-for="FPrWarpingProcessRopeBallDetails.LINK_BALL_LENGTH" class="control-label"></label>
                        <input asp-for="FPrWarpingProcessRopeBallDetails.LINK_BALL_LENGTH" class="form-control" />
                        <span asp-validation-for="FPrWarpingProcessRopeBallDetails.LINK_BALL_LENGTH" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label asp-for="FPrWarpingProcessRopeBallDetails.LEADLINE" class="control-label"></label>
                        <input asp-for="FPrWarpingProcessRopeBallDetails.LEADLINE" class="form-control" />
                        <span asp-validation-for="FPrWarpingProcessRopeBallDetails.LEADLINE" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label asp-for="FPrWarpingProcessRopeBallDetails.REMARKS" class="control-label"></label>
                        <input asp-for="FPrWarpingProcessRopeBallDetails.REMARKS" class="form-control" />
                        <span asp-validation-for="FPrWarpingProcessRopeBallDetails.REMARKS" class="text-danger"></span>
                    </div>
                </div>

                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <button class="btn btn-warning pull-right" type="submit" id="btn_submit">Update</button>
                    <button id="btnAddBall" class="btn btn-success pull-right mr-2" type="button">Add</button>
                    <button class="btn btn-info prevBtn pull-right" type="button">Prev</button>
                    <a asp-action="GetWarpingProcessRopeList" class="btn btn-dark pull-right mr-2">Back to List</a>
                </div>
                <div id="BallDetails" class="col-lg-12 col-md-12 col-sm-12 col-xs-12">@await Html.PartialAsync("~/Views/FPrWarpingProcessRopeMaster/AddBallNoList.cshtml", Model)</div>
            </div>
        </div>
    </form>
</div>

@section Styles {
    <link href="~/css/CustomCSS/Stepper.css" rel="stylesheet" asp-append-version="true" />
}

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptPartial_Except_jQuery");}
    <script src="~/js/custom-js/Stepper.js" asp-append-version="true"></script>
    <script type="text/javascript" asp-append-version="true">



        var consum = $("#FPrWarpingProcessRopeYarnConsumDetails_CONSUM_TOTAL");
        var waste = $("#FPrWarpingProcessRopeYarnConsumDetails_WASTE_TOTAL");
        var ratioWarp = $("#ratioWarp");
        var totalEnds = $("#totalEnds");
        var endsRope = $("#FPrWarpingProcessRopeBallDetails_ENDS_ROPE");
        var wastePercentage = $("#FPrWarpingProcessRopeYarnConsumDetails_WASTE_PERCENTAGE_TOTAL");
        var warpLengthPerSet = $("#FPrWarpingProcessRopeDetails_WARP_LENGTH_PER_SET");
        var warpLengthPerSubGroup = $("#FPrWarpingProcessRopeMaster_WARP_LENGTH");
        var warpLenAct = $("#warpLenAct");
        var ballLength = $("#FPrWarpingProcessRopeBallDetails_BALL_LENGTH");

        $(function () {

            getSubGroupDetails($("#FPrWarpingProcessRopeMaster_SUBGROUPID").val());

            consum.on("change",
                function () {
                    var result = getWastePercentage(consum.val(), waste.val());
                    wastePercentage.val(result.toFixed(3));
                });

            waste.on("change",
                function () {
                    var result = getWastePercentage(consum.val(), waste.val());
                    wastePercentage.val(result.toFixed(3));
                });

            ballLength.on("focus",
                function () {
                    //console.log(warpLength.val());
                    ballLength.val(warpLengthPerSet.val());
                });


            $("#FPrWarpingProcessRopeMaster_SUBGROUPID").on('change',
                function () {
                    var selectedVal = $(this).val();
                    getSubGroupDetails(selectedVal);

                });

            $("#FPrWarpingProcessRopeDetails_SETID").on('change',
                function () {
                    var selectedVal = $(this).val();

                    if (selectedVal === "") {
                        $("#style").text("");
                        $("#orderNo").text("");
                        $("#po").text("");
                        $("#poLength").text("");
                        $("#supplier").text("");
                        $("#orderType").text("");
                        $("#Buyer").text("");
                        $("#color").text("");
                        $("#yarnType").text("");
                        $("#warpType").text("");
                        $("#loomType").text("");
                        $("#processType").text("");
                        $("#programType").text("");
                        $("#totalEnds").text("");
                        $("#lot").text("");
                        endsRope.val("");
                        return false;
                    }

                    $("#ballCount").text(0);
                    $("#btn_submit").prop("disabled", true);
                    $.ajax({
                        async: true,
                        cache: false,
                        data: { "setId": selectedVal },
                        type: "GET",
                        url: "/FPrWarpingProcessRopeMaster/GetDataBySetIdAsync",
                        success: function (data) {
                            console.log(data);

                            // Value Set to Read-only Field
                            $("#style").text(data.piDetails.style.fabcodeNavigation.stylE_NAME);
                            $("#orderNo").text(data.piDetails.sO_NO);
                            $("#po").text(data.piDetails.pino);
                            $("#poLength").text(data.plProductionSetDistribution.proG_.blK_PROG_.rndProductionOrder.ordeR_QTY_MTR);
                            //$("#supplier").text(data.piDetails.style.fabcodeNavigation.stylE_NAME);
                            $("#orderType").text(data.plProductionSetDistribution.proG_.blK_PROG_.rndProductionOrder.otype.otypename);
                            $("#Buyer").text(data.piDetails.pimaster.buyer.buyeR_NAME);
                            $("#color").text(data.piDetails.style.fabcodeNavigation.colorcodeNavigation.color);
                            $("#yarnType").text(data.plProductionSetDistribution.proG_.yarnfor.yarnname);
                            $("#warpType").text(data.plProductionSetDistribution.proG_.warP_TYPE);
                            $("#loomType").text(data.piDetails.style.fabcodeNavigation.loom.looM_TYPE_NAME);
                            $("#processType").text(data.plProductionSetDistribution.proG_.procesS_TYPE);
                            $("#programType").text(data.plProductionSetDistribution.proG_.prograM_TYPE);
                            $("#totalEnds").text(data.piDetails.style.fabcodeNavigation.totalends);


                            // Value Set to Input Field
                            $("#setLength").text(data.plProductionSetDistribution.proG_.seT_QTY);

                            var warpLenPerSet = (warpLengthPerSubGroup.val() * data.plProductionSetDistribution.proG_.seT_QTY) / warpLenAct.text();

                            $("#FPrWarpingProcessRopeDetails_WARP_LENGTH_PER_SET").val(warpLenPerSet.toFixed(0));

                            var accLot = "";
                            $.each(data.plProductionSetDistribution.proG_.pL_BULK_PROG_YARN_D,
                                function (id, option) {
                                    accLot += option.lot.lotno;
                                    if (option.lot.brand != null) {
                                        accLot += ": " + option.lot.brand;
                                    }
                                    accLot += " + ";
                                });

                            $("#lot").text(accLot.substring(0, (accLot.lastIndexOf("+"))));

                            endsRope.val((totalEnds.text() / ratioWarp.text()).toFixed(0));


                        },
                        error: function (e) {
                            console.log(e);
                        }
                    });
                });


            $("#FPrWarpingProcessRopeYarnConsumDetails_COUNT_ID").on('change',
                function () {

                    if ($("#FPrWarpingProcessRopeMaster_SUBGROUPID").val() === "") {
                        toastr.error("Please Select Sub-Group Id", "Error");
                        $("#FPrWarpingProcessRopeYarnConsumDetails_COUNT_ID").val("");
                        return false;
                    }

                    var selectedVal = $(this).val();
                    $("#FPrWarpingProcessRopeYarnConsumDetails_CONSUM_TOTAL").val("");
                    $("#FPrWarpingProcessRopeYarnConsumDetails_WASTE_TOTAL").val("");
                    $("#FPrWarpingProcessRopeYarnConsumDetails_WASTE_PERCENTAGE_TOTAL").val("");
                    $("#FPrWarpingProcessRopeYarnConsumDetails_REJECTION").val("");
                    $("#FPrWarpingProcessRopeYarnConsumDetails_REJECTION_PERCENTAGE").val("");
                    $("#FPrWarpingProcessRopeYarnConsumDetails_REMARKS").val("");


                    $.ajax({
                        async: true,
                        cache: false,
                        data: { "orderNo": $("#programNo").text(), "CountId": selectedVal, "warpLength": warpLengthPerSubGroup.val() },
                        type: "GET",
                        url: "/RndProductionOrder/GetPoDetailsForCountBudget",
                        success: function (data) {
                            console.log(data);
                            //var programCount = $("#programCount").text();
                            //var reqKgPerSet = data.toFixed(2);
                            // Value Set to input Field
                            //$("#FPrWarpingProcessRopeYarnConsumDetails_BGT_KG_PER_SET").val(reqKgPerSet);
                            $("#FPrWarpingProcessRopeYarnConsumDetails_BGT_KG_TOTAL").val(data.toFixed(0));

                        },
                        error: function (e) {
                            console.log(e);
                        }
                    });
                });

            $("#btnAddBall").on('click',
                function () {


                    debugger;
                    console.log($('#FPrWarpingProcessRopeMaster_SUBGROUPID').val());
                    if ($('#FPrWarpingProcessRopeMaster_SUBGROUPID').val() === "") {
                        toastrNotification("Error: Please Select Program/Set No", "error");
                        return false;
                    }

                    if ($('#FPrWarpingProcessRopeBallDetails_BALL_ID_FK').val() === "") {
                        toastrNotification("Error: Please Select Ball No.", "error");
                        return false;
                    }

                    if (parseInt($("#ballCount").text()) >= parseInt($("#ratioWarp").text())) {
                        toastrNotification("Error: You have added maximum number of ball for this set.", "error");
                        return false;
                    }

                    $.ajax({
                        async: true,
                        cache: false,
                        data: $('#form').serialize(),
                        type: "POST",
                        url: "/FPrWarpingProcessRopeMaster/AddBallNoList",
                        success: function (partialView, status, xhr) {
                            var ballCount = xhr.getResponseHeader("BallCount");
                            BallAlerts(ballCount);
                            $('#BallDetails').html(partialView);
                        },
                        error: function (e) {
                            console.log(e);
                        }
                    });
                });

            $("#btnAddCount").on('click',
                function () {
                    $.ajax({
                        async: true,
                        cache: false,
                        data: $('#form').serialize(),
                        type: "POST",
                        url: "/FPrWarpingProcessRopeMaster/AddCountList",
                        success: function (partialView, status, xhr) {
                            $('#CountDetails').html(partialView);
                        },
                        error: function (e) {
                            console.log(e);
                        }
                    });
                });


            $("#FPrWarpingProcessRopeDetails_BALL_NO").on("change",
                function () {
                    var insertedItem = $(this).val();
                    var x = getEndsRope($("#totalEnds").text(), insertedItem);
                    $("#FPrWarpingProcessRopeBallDetails_ENDS_ROPE").val(x);
                });
        });

        function BallAlerts(ballCount) {
            var noOfBall = $("#ratioWarp").text();
            $("#ballCount").text(ballCount);
            var ballLeft = noOfBall - ballCount;

            if (ballLeft === 0) {
                $("#btn_submit").prop("disabled", false);
            }

            toastrNotification('You Need to Add ' + ballLeft + ' More Ball(s)', 'info');
        }

        function getWastePercentage(consum, waste) {
            var result = (waste * 100) / consum;
            return result;
        }
        function getEndsRope(totalEnds, ball) {
            var result = (totalEnds / ball);
            return result;
        }

        function getSubGroupDetails(selectedVal) {
            $("#style").text("");
            $("#orderNo").text("");
            $("#po").text("");
            $("#poLength").text("");
            $("#supplier").text("");
            $("#orderType").text("");
            $("#Buyer").text("");
            $("#color").text("");
            $("#yarnType").text("");
            $("#warpType").text("");
            $("#loomType").text("");
            $("#processType").text("");
            $("#programType").text("");
            $("#totalEnds").text("");
            $("#lot").text("");
            endsRope.val("");

            $("#FPrWarpingProcessRopeYarnConsumDetails_CONSUM_TOTAL").val("");
            $("#FPrWarpingProcessRopeYarnConsumDetails_WASTE_TOTAL").val("");
            $("#FPrWarpingProcessRopeYarnConsumDetails_WASTE_PERCENTAGE_TOTAL").val("");
            $("#FPrWarpingProcessRopeYarnConsumDetails_REJECTION").val("");
            $("#FPrWarpingProcessRopeYarnConsumDetails_REJECTION_PERCENTAGE").val("");
            $("#FPrWarpingProcessRopeYarnConsumDetails_REMARKS").val("");
            $("#FPrWarpingProcessRopeDetails_WARP_LENGTH_PER_SET").val("");


            if (selectedVal === "") {
                var setId = $("#FPrWarpingProcessRopeDetails_SETID");
                var countIdConsum = $("#FPrWarpingProcessRopeYarnConsumDetails_COUNT_ID");
                var countIdBall = $("#FPrWarpingProcessRopeBallDetails_COUNT_ID");


                // Value Set to Input Field
                $("#setLength").text("");
                $("#ratioWarp").text("");
                //warpLengthPerSubGroup.val("");
                warpLenAct.text("");
                $("#FPrWarpingProcessRopeDetails_BALL_NO").val("");


                // Value Set to Dropdown
                setId.html('');
                countIdConsum.html('');
                countIdBall.html('');

                setId.append('<option value="" selected>Select Program/Set No.</option>');
                countIdConsum.append('<option value="" selected>Select Count Name</option>');
                countIdBall.append('<option value="" selected>Select Count Name</option>');

                $("#programNo").text("");
                $("#programCount").text("");

                return false;
            }


            $.ajax({
                async: true,
                cache: false,
                data: { "subGroup": selectedVal },
                type: "GET",
                url: "/Production/RopeWarping/GetDataBySubGroup",
                success: function (data) {

                    var setId = $("#FPrWarpingProcessRopeDetails_SETID");
                    var countIdConsum = $("#FPrWarpingProcessRopeYarnConsumDetails_COUNT_ID");
                    var countIdBall = $("#FPrWarpingProcessRopeBallDetails_COUNT_ID");

                    $("#ratioWarp").text(data.pL_PRODUCTION_PLAN_DETAILS.ratio);
                    $("#FPrWarpingProcessRopeDetails_BALL_NO").val(data.pL_PRODUCTION_PLAN_DETAILS.ratio);

                    var warpLength = 0;

                    $.each(data.pL_PRODUCTION_PLAN_DETAILS.pL_PRODUCTION_SETDISTRIBUTION, function (id, item) {
                        warpLength += item.proG_.seT_QTY;
                    });

                    //warpLengthPerSubGroup.val(warpLength);
                    warpLenAct.text(warpLength);
                    var set = setId.val();
                    // Value Set to Dropdown
                    setId.html('');
                    countIdConsum.html('');
                    countIdBall.html('');

                    setId.append('<option value="" selected>Select Program/Set No.</option>');
                    countIdConsum.append('<option value="" selected>Select Count Name</option>');
                    countIdBall.append('<option value="" selected>Select Count Name</option>');

                    $.each(data.pL_PRODUCTION_PLAN_DETAILS.pL_PRODUCTION_SETDISTRIBUTION, function (id, option) {
                        setId.append($('<option></option>').val(option.setid).html(option.proG_.proG_NO));
                    });

                    setId.val(set);

                    $("#programNo").text(data.pL_PRODUCTION_PLAN_DETAILS.pL_PRODUCTION_SETDISTRIBUTION[0].proG_.proG_ID);
                    $("#programCount").text(data.pL_PRODUCTION_PLAN_DETAILS.pL_PRODUCTION_SETDISTRIBUTION.length);

                    var flag = true;

                    $.each(data.pL_PRODUCTION_PLAN_DETAILS.pL_PRODUCTION_SETDISTRIBUTION[0].proG_.blK_PROG_.rndProductionOrder.so.style.fabcodeNavigation.rnD_FABRIC_COUNTINFO,
                        function (id, option) {
                            if (option.yarnfor === 1) {
                                flag = false;
                                countIdConsum.append($('<option></option>').val(option.count.countid).html(option.count.countname));
                                countIdBall.append($('<option></option>').val(option.count.countid).html(option.count.countname));
                            }
                        });

                    if (flag) {
                        $.each(data.pL_PRODUCTION_PLAN_DETAILS.pL_PRODUCTION_SETDISTRIBUTION[0].proG_.blK_PROG_.rndProductionOrder.rs.rnD_SAMPLE_INFO_DETAILS,
                            function (id, option) {
                                countIdConsum.append($('<option></option>').val(option.count.countid).html(option.count.countname));
                                countIdBall.append($('<option></option>').val(option.count.countid).html(option.count.countname));
                            });


                        flag = false;

                    }

                    var totalEnds = data.pL_PRODUCTION_PLAN_DETAILS.pL_PRODUCTION_SETDISTRIBUTION[0].proG_.blK_PROG_.rndProductionOrder.so.style.fabcodeNavigation.totalends;

                    var warpRatio = data.pL_PRODUCTION_PLAN_DETAILS.ratio;

                    endsRope.val(totalEnds / warpRatio);


                    // Value Set to Read-only Field
                    $("#style").text(data.pL_PRODUCTION_PLAN_DETAILS.pL_PRODUCTION_SETDISTRIBUTION[0].proG_.blK_PROG_.rndProductionOrder.so.style.fabcodeNavigation.stylE_NAME);

                    $("#orderNo").text(data.pL_PRODUCTION_PLAN_DETAILS.pL_PRODUCTION_SETDISTRIBUTION[0].proG_.blK_PROG_.rndProductionOrder.so.sO_NO);

                    $("#po").text(data.pL_PRODUCTION_PLAN_DETAILS.pL_PRODUCTION_SETDISTRIBUTION[0].proG_.blK_PROG_.rndProductionOrder.so.pimaster.pino);

                    $("#poLength").text(data.pL_PRODUCTION_PLAN_DETAILS.pL_PRODUCTION_SETDISTRIBUTION[0].proG_.blK_PROG_.rndProductionOrder.ordeR_QTY_MTR);

                    //$("#supplier").text(data.piDetails.style.fabcodeNavigation.stylE_NAME);
                    $("#orderType").text(data.pL_PRODUCTION_PLAN_DETAILS.pL_PRODUCTION_SETDISTRIBUTION[0].proG_.blK_PROG_.rndProductionOrder.otype.otypename);

                    $("#Buyer").text(data.pL_PRODUCTION_PLAN_DETAILS.pL_PRODUCTION_SETDISTRIBUTION[0].proG_.blK_PROG_.rndProductionOrder.so.pimaster.buyer.buyeR_NAME);

                    $("#color").text(data.pL_PRODUCTION_PLAN_DETAILS.pL_PRODUCTION_SETDISTRIBUTION[0].proG_.blK_PROG_.rndProductionOrder.so.style.fabcodeNavigation.colorcodeNavigation.color);

                    $("#yarnType").text(data.pL_PRODUCTION_PLAN_DETAILS.pL_PRODUCTION_SETDISTRIBUTION[0].proG_.yarnfor.yarnname);

                    $("#warpType").text(data.pL_PRODUCTION_PLAN_DETAILS.pL_PRODUCTION_SETDISTRIBUTION[0].proG_.warP_TYPE);

                    $("#loomType").text(data.pL_PRODUCTION_PLAN_DETAILS.pL_PRODUCTION_SETDISTRIBUTION[0].proG_.blK_PROG_.rndProductionOrder.so.style.fabcodeNavigation.loom.looM_TYPE_NAME);

                    $("#processType").text(data.pL_PRODUCTION_PLAN_DETAILS.pL_PRODUCTION_SETDISTRIBUTION[0].proG_.procesS_TYPE);

                    $("#programType").text(data.pL_PRODUCTION_PLAN_DETAILS.pL_PRODUCTION_SETDISTRIBUTION[0].proG_.prograM_TYPE);

                    $("#totalEnds").text(totalEnds);


                    // Value Set to Input Field
                    //$("#setLength").text(data.plProductionSetDistribution.proG_.seT_QTY);
                    //var warpLenPerSet = (warpLengthPerSubGroup.val() * data.plProductionSetDistribution.proG_.seT_QTY) / warpLenAct.text();
                    //$("#FPrWarpingProcessRopeDetails_WARP_LENGTH_PER_SET").val(warpLenPerSet.toFixed(0));

                    var accLot = "";

                    $.each(data.pL_PRODUCTION_PLAN_DETAILS.pL_PRODUCTION_SETDISTRIBUTION[0].proG_.pL_BULK_PROG_YARN_D, function (id, option) {
                            accLot += option.lot.lotno;
                            if (option.lot.brand != null) {
                                accLot += ": " + option.lot.brand;
                            }
                            accLot += " + ";
                        });

                    $("#lot").text(accLot.substring(0, (accLot.lastIndexOf("+"))));


                },
                error: function (e) {
                    console.log(e);
                }
            });
        }

    </script>
}
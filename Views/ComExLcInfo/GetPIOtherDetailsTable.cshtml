@model COM_EX_PIMASTER

<h2><i class="fa fa-eye text-info" aria-hidden="true"></i> PI Details</h2>

@if (Model.COM_EX_PI_DETAILS.Any(e => e.SO_STATUS))
{
    <table class="table table-hover">
        <thead class="thead-light">
            <tr>
                <th>#</th>
                <th>@Html.DisplayNameFor(model => model.COM_EX_PI_DETAILS.FirstOrDefault().STYLE.STYLENAME)</th>
                <th>@Html.DisplayNameFor(model => model.COM_EX_PI_DETAILS.FirstOrDefault().STYLE.FABCODENavigation.STYLE_NAME)</th>
                <th>@Html.DisplayNameFor(model => model.COM_EX_PI_DETAILS.FirstOrDefault().F_BAS_UNITS.UNAME)</th>
                <th>@Html.DisplayNameFor(model => model.COM_EX_PI_DETAILS.FirstOrDefault().QTY)</th>
                <th>@Html.DisplayNameFor(model => model.COM_EX_PI_DETAILS.FirstOrDefault().UNITPRICE)</th>
                <th>@Html.DisplayNameFor(model => model.COM_EX_PI_DETAILS.FirstOrDefault().TOTAL)</th>
                <th>@Html.DisplayNameFor(model => model.COM_EX_PI_DETAILS.FirstOrDefault().REMARKS)</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.COM_EX_PI_DETAILS.Where(e => e.SO_STATUS).Select((value, index) => new { index, value }))
            {
                <tr>
                    <td>@(item.index + 1)</td>
                    <td>@Html.DisplayFor(c => item.value.STYLE.STYLENAME)</td>
                    <td>@Html.DisplayFor(c => item.value.STYLE.FABCODENavigation.STYLE_NAME)</td>
                    <td>@Html.DisplayFor(c => item.value.F_BAS_UNITS.UNAME)</td>
                    <td>@Html.DisplayFor(c => item.value.QTY)</td>
                    <td>@Html.DisplayFor(c => item.value.UNITPRICE)</td>
                    <td>@Html.DisplayFor(c => item.value.TOTAL)</td>
                    <td>@Html.DisplayFor(c => item.value.REMARKS)</td>
                </tr>
            }
            <tr>
                <td>Total</td>
                <td>:</td>
                <td colspan="4"></td>
                <td colspan="2">@Model.COM_EX_PI_DETAILS.Where(e => e.SO_STATUS).Sum(e => e.TOTAL)</td>
            </tr>
        </tbody>
    </table>
}